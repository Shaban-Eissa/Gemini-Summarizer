<div class="relative min-h-screen px-2 py-4 sm:px-4 sm:py-8 overflow-x-hidden">
  <div
    class="fixed inset-0 z-[-2] bg-white bg-[radial-gradient(100%_50%_at_50%_0%,rgba(0,163,255,0.13)_0,rgba(0,163,255,0)_50%,rgba(0,163,255,0)_100%)] dark:bg-gray-950 dark:bg-[radial-gradient(100%_50%_at_50%_0%,rgba(0,163,255,0.08)_0,rgba(0,163,255,0)_50%,rgba(0,163,255,0)_100%)]">
  </div>
  <app-header-bar></app-header-bar>

  <main class="mx-auto mt-4 sm:mt-8 grid max-w-4xl gap-4 sm:gap-6 grid-cols-1 lg:grid-cols-12 lg:items-stretch">
    <section class="lg:col-span-7 flex flex-col">
      <div class="flex-1">
        <app-form-card [url]="url()" (urlChange)="url.set($event)" [text]="text()" (textChange)="text.set($event)"
          [style]="style()" (styleChange)="style.set($event)" [styleOptions]="styleOptions" [loading]="loading()"
          [loadingText]="loadingText()" [loadingProgress]="loadingProgress()" (generate)="generate()"></app-form-card>
      </div>
    </section>

    <aside class="lg:col-span-5 flex flex-col">
      <div
        class="flex-1 rounded-2xl border border-gray-200 bg-white p-3 sm:p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="mb-3 flex items-center justify-between">
          <h3 class="text-sm font-semibold text-gray-800 dark:text-gray-200">Recent Summaries</h3>
          <span class="text-xs text-gray-400">{{ summary.summaries().length }} items</span>
        </div>
        <div class="max-h-80 sm:max-h-96 overflow-y-auto">
          <app-recent-list [items]="summary.summaries()" (open)="openSummaryModal($event)"></app-recent-list>
        </div>
      </div>
    </aside>
  </main>

  @if (result()) {
  <section class="mx-auto mt-4 sm:mt-8 max-w-4xl px-2 sm:px-0">
    <app-summary-card [html]="renderedSummary()"
      [openHref]="'http://localhost:5000/api/summary/' + (result()?.id || '')" [keywords]="keywords()"
      (copy)="copySummary()" (rephrase)="rephrase($event)"></app-summary-card>
  </section>
  }

  <app-footer-bar></app-footer-bar>

  <app-summary-modal [open]="modalOpen()" [item]="modalItem()" (close)="closeSummaryModal()"></app-summary-modal>

  <app-command-palette [open]="paletteOpen()" [query]="paletteQuery()" (close)="closePalette()"
    (action)="selectPaletteAction($event)"></app-command-palette>

  <app-toast [message]="toastMessage()"></app-toast>
</div>
